<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Friendfinder Survey</title>
  <!-- <script src="app.js"></script>  -->
  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <script
  src="http://code.jquery.com/jquery-3.3.1.js"
  integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
  crossorigin="anonymous"></script>

</head>
<body>

  <div class="container">

    <div class="jumbotron">
      <h1 class="text-center"><span class="glyphicon glyphicon-friend"></span> Friend Finder</h1>
      <hr>
      <h2 class="text-center">Match with a friend! Fill out the survey!</h2>
      <br>

      <div class="text-center">
        <a href="/survey"><button class="btn btn-lg btn-primary"><span class="glyphicon glyphicon-list-alt"></span> Match Up</button></a>
        <a href="/reserve"><button class="btn btn-lg btn-danger"><span class="glyphicon glyphicon-credit-card"></span> See all Friends!</button></a>
      </div>

    </div>

    <div id="test"></div>

    <div class="row">
      <div class="col-lg-12">

        <!-- Reservation Page -->
        <div class="panel panel-default">
          <div class="panel-heading">
            <h4 class="panel-title">About You</h4>
          </div>
          <div class="panel-body">

            <form role="form">

              <div class="form-group">
                <label for="userName">Name</label>
                <input type="text" class="form-control" id="userName">
              </div>

              <div class="form-group">
                <label for="userPhoto">Photo URL</label>
                <input type="text" class="form-control" id="userPhoto">
              </div>

              <div class="form-group">
                <label for="question1">question1</label>
                <input type="text" class="form-control" id="question1">
              </div>

              <div class="form-group">
                <label for="question2">question2</label>
                <input type="text" class="form-control" id="question2">
              </div>

              <div class="form-group">
                <label for="question3">question3</label>
                <input type="text" class="form-control" id="question3">
              </div>

              <div class="form-group">
                <label for="question4">question4</label>
                <input type="text" class="form-control" id="question4">
              </div>

              <div class="form-group">
                <label for="question5">question5</label>
                <input type="text" class="form-control" id="question5">
              </div>

              <div class="form-group">
                <label for="question6">question6</label>
                <input type="text" class="form-control" id="question6">
              </div>

              <div class="form-group">
                <label for="question7">question7</label>
                <input type="text" class="form-control" id="question7">
              </div>

              <div class="form-group">
                <label for="question8">question8</label>
                <input type="text" class="form-control" id="question8">
              </div>

              <div class="form-group">
                <label for="question9">question9</label>
                <input type="text" class="form-control" id="question9">
              </div>

              <div class="form-group">
                <label for="question10">question10</label>
                <input type="text" class="form-control" id="question10">
              </div>

              <button id="submitButton" type="submit" class="btn btn-primary submit">Submit</button>
            </form>

          </div>
        </div>

        </div>


        <div id="finalModal" class="modal fade">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <span class="close">&times;</span>
                <h2 id="modalTitle">Your best match!</h2> 
              </div>
              <div class="modal-body">
                <h2 id="matchName"></h2>
                <img id="matchImg" src="" alt="">
              </div>
           </div>
          </div>
        </div>

    <footer class="footer">
      <div class="container">
        <p><a href="/api/tables">API Table Link</a> | <a href="/api/waitlist">API Wait List</a> | <a href="https://github.com/afhaque/HotRestaurant">GitHub Repo</a></p>
      </div>
    </footer>

  </div>
</div>

<script type="text/javascript">

  $('#submitButton').on('click', function(event) {
    event.preventDefault();

    var userInput = {
        name: $('#userName').val().trim(),
        photo: $('#userPhoto').val().trim(),
        score: [
            $('#question1').val().trim(),
            $('#question2').val().trim(),
            $('#question3').val().trim(),
            $('#question4').val().trim(),
            $('#question5').val().trim(),
            $('#question6').val().trim(),
            $('#question7').val().trim(),
            $('#question8').val().trim(),
            $('#question9').val().trim(),
            $('#question10').val().trim()
        ]
    };

    console.log(JSON.stringify(userInput))

    $.post("/api/friends", userInput)
    .done(function(data) {
      console.log('data:', data);
      $('#matchName').text(data.name);
      $('#matchImg').attr("src", data.photo);
      $('#finalModal').modal('show');

});
});




</script>

</body>
</html>